<template>
  <div class="bg-primaryColor primary-fonts">
    <div class="px-2 text-secondaryFontColor md:items-center md:px-40">        
        <div class="flex items-center justify-between h-20">
          <div class="flex-shrink-0">
            <img :width="project.logo.width" :src="project.logo.url" >
          </div>
          <div>
            <p class="text-xl text-secondaryFontColor">{{ page.title }}</p>
          </div>
          <div class="hidden md:block">
            <a href="/logout" class="hover:text-secondaryFontColor">
              <i class="mr-2 fa fa-user"></i>
              <span>Log Out</span>
            </a>
          </div>
          <div class="block p-2 text-secondaryFontColor md:hidden" @click="barToggle">
            <i class="justify-end float-right px-2 text-lg border cursor-pointer fa fa-bars border-borderPrimaryColor"></i>
          </div>
        </div>
    </div>
    <div class="px-5 bg-secondaryColor text-secondaryFontColor md:grid" :class='isVisible ? "block" : "hidden"'>
      <div
        class="relative left-0 right-0 grid items-center gap-1 m-auto md:min-h-14 w-max sm:grid-cols-3 md:grid-cols-4"
        :class="gridRange"
      >
        <a
          v-for="page in project.nav"
          :class="navSelected(page.url, 'bg-secondaryHighlightColor', 'bg-secondaryButtonColor')"
          :href="'/' + page.url"
          class="flex items-center justify-center h-full px-2 py-4 hover:text-secondaryFontColor hover:bg-secondaryHighlightColor">

          <i :class="'icon fas text-secondaryFontColor text-base ' + page.icon_class" />
          <span class="pl-2 fonst-small">{{ page.title }} </span>
        </a>
        <a href="/logout" class="flex items-center justify-center h-full px-2 py-4 hover:text-secondaryFontColor bg-secondaryButtonColor hover:bg-secondaryHighlightColor md:hidden">
          <i class="fa fa-user"></i>
          <span class="pl-2">Log Out</span>
        </a>
      </div>
    </div>
  </div>
</template>

<script>
  export default {
    data: () => ({
      isVisible: false,
      gridRange: 'lg:grid-cols-8',
    }),
    mounted() {
      this.getNavbarGrids();
    },
    methods: {
      barToggle() {
        this.isVisible = !this.isVisible
      },
      getNavbarGrids() {
        const navItems = this.project.nav;
        if (navItems && navItems.length) {
          const range = navItems.length < 10 ? navItems.length : 8;
          this.gridRange = `lg:grid-cols-${range}`;
          console.log(this.gridRange);
          return;
        }
        this.gridRange = 'lg:grid-cols-8';
      }
    }
  }
</script>